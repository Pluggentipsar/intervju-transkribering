{
  "permissions": {
    "allow": [
      "Bash(dir \"c:\\\\Kod\\\\intervju-transkribering\\\\backend\")",
      "Bash(dir \"c:\\\\Kod\\\\intervju-transkribering\\\\frontend\")",
      "Bash(python -m venv:*)",
      "Bash(.venvScriptspip install -e \".[dev]\")",
      "Bash(venv/Scripts/python.exe -m pip install:*)",
      "Bash(npm install)",
      "Bash(npm run dev:*)",
      "Bash(venv/Scripts/python.exe -m uvicorn:*)",
      "Bash(dir /s /b c:Kodintervju-transkriberingfrontendsrc)",
      "Bash(curl:*)",
      "Bash(python:*)",
      "Bash(dir:*)",
      "Bash(git checkout:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git push)",
      "Bash(where:*)",
      "Bash(py:*)",
      "Bash(winget search:*)",
      "Bash(winget install:*)",
      "Bash(./venv_py311/Scripts/pip:*)",
      "Bash(ffmpeg:*)",
      "Bash(echo:*)",
      "Bash(nvidia-smi:*)",
      "Bash(./venv_py311/Scripts/python:*)",
      "Bash(.venv_py311Scriptspython.exe -m ruff check:*)",
      "Bash(\".\\\\venv_py311\\\\Scripts\\\\python.exe\" -m ruff check app/services/anonymization.py app/api/v1/jobs.py app/schemas/segment.py)",
      "Bash(\".\\\\venv_py311\\\\Scripts\\\\python.exe\" -m ruff check app/services/anonymization.py app/api/v1/jobs.py app/schemas/segment.py --fix)",
      "Bash(\".\\\\venv_py311\\\\Scripts\\\\python.exe\" -m mypy app/services/anonymization.py app/api/v1/jobs.py app/schemas/segment.py --ignore-missing-imports)",
      "Bash(timeout 10 \".\\\\venv_py311\\\\Scripts\\\\python.exe\":*)",
      "Bash(\".\\\\venv_py311\\\\Scripts\\\\python.exe\" -c:*)",
      "Bash(\".\\\\venv_py311\\\\Scripts\\\\python.exe\" -m ruff check app/services/anonymization.py --fix)",
      "Bash(\".\\\\venv_py311\\\\Scripts\\\\python.exe\" -m ruff format:*)",
      "Bash(npm run lint)",
      "Bash(npm run typecheck:*)",
      "Bash(\".\\\\venv_py311\\\\Scripts\\\\python.exe\" -m ruff check app/api/v1/anonymize.py --fix)",
      "Bash(\".\\\\venv_py311\\\\Scripts\\\\python.exe\" -m ruff check app/api/v1/ --fix)",
      "Bash(\".\\\\venv_py311\\\\Scripts\\\\python.exe\" -c \"from app.api.v1.anonymize import router; print\\(''Import successful''\\)\")",
      "Bash(\".\\\\venv_py311\\\\Scripts\\\\python.exe\":*)",
      "Bash(\".\\\\venv_py311\\\\Scripts\\\\python.exe\" -m ruff format app/services/anonymization.py)",
      "Bash(\".\\\\venv_py311\\\\Scripts\\\\python.exe\" -m ruff check app/services/anonymization.py app/api/v1/anonymize.py --fix)",
      "Bash(.venvScriptsactivate)",
      "Bash(ruff check:*)",
      "Bash(mypy:*)",
      "Bash(c:/Koden/intervju-transkribering/backend/venv/Scripts/python.exe:*)",
      "Bash(npm run build:*)",
      "Bash(Remove-Item \"c:\\\\Koden\\\\intervju-transkribering\\\\backend\\\\transcription.db\" -Force)",
      "Bash(npm install:*)",
      "Bash(git merge:*)",
      "Bash(rustc:*)",
      "Bash(pip install:*)",
      "Bash(node scripts/build-backend.js:*)",
      "Bash(findstr:*)",
      "Bash(powershell -Command \"Invoke-WebRequest -Uri ''https://www.python.org/ftp/python/3.11.9/python-3.11.9-embed-amd64.zip'' -OutFile ''python311.zip''\")",
      "Bash(powershell:*)",
      "Bash(python311python.exe:*)",
      "Bash(\"c:\\\\Kod\\\\intervju-transkribering-1\\\\build-exe\\\\python311\\\\python.exe\" get-pip.py)",
      "Bash(\"c:\\\\Kod\\\\intervju-transkribering-1\\\\build-exe\\\\python311\\\\python.exe\" -m pip install:*)",
      "Bash(\"c:\\\\Kod\\\\intervju-transkribering-1\\\\build-exe\\\\python311\\\\python.exe\" -m pip install faster-whisper huggingface-hub)",
      "Bash(xcopy:*)",
      "Bash(set TAURI_BUILD=1)",
      "Bash(set STATIC_BUILD=1)",
      "Bash(cross-env STATIC_BUILD=1 npm run build:*)",
      "Bash(npx cross-env:*)",
      "Bash(npx next:*)",
      "Bash(STATIC_BUILD=true npm run build:*)",
      "Bash(./python311/python.exe -m PyInstaller:*)",
      "Bash(netstat:*)",
      "Bash(taskkill:*)",
      "Bash(timeout /t 2 /nobreak)",
      "Bash(cmd //c \"taskkill /PID 30656 /F\")",
      "Bash(cmd //c \"start /B TystText-Backend.exe\")",
      "Bash(cmd //c \"timeout /t 5 /nobreak > nul\")",
      "Bash(cmd //c \"tasklist /FI \"\"PID eq 30656\"\"\")",
      "Bash(tasklist:*)",
      "Bash(zip:*)",
      "Bash(git push:*)",
      "Bash(./python311/python.exe:*)",
      "Bash(.python311python.exe -m PyInstaller TystText-Backend.spec --noconfirm)",
      "Bash(cd:*)",
      "Bash(c:/Kod/intervju-transkribering-1/build-exe/python311/python.exe -m PyInstaller:*)",
      "Bash(python3:*)",
      "Bash(\"c:/Kod/intervju-transkribering-1/build-exe/python311/python.exe\" -c \"\nimport re\nwith open\\(''c:/Kod/intervju-transkribering-1/TystText-Distribution/frontend/_next/static/chunks/app/jobs/[id]/page-7e8369276779f4ad.js'', ''r'', encoding=''utf-8''\\) as f:\n    content = f.read\\(\\)\n    # Look for placeholder check\n    if ''!==\\\\\"\"placeholder\\\\\"\"'' in content or \"\"!==''placeholder''\"\" in content:\n        print\\(''Found placeholder check!''\\)\n    else:\n        print\\(''No placeholder check found''\\)\n    # Count occurrences\n    print\\(f''placeholder occurrences: {content.count\\(\"\"placeholder\"\"\\)}''\\)\n\")",
      "Bash(python311/python.exe:*)",
      "WebFetch(domain:github.com)",
      "WebFetch(domain:raw.githubusercontent.com)",
      "Bash(gh api:*)",
      "WebFetch(domain:api.github.com)",
      "Bash(./venv/Scripts/python.exe -m pip:*)",
      "Bash(./venv/Scripts/pip.exe install:*)",
      "Bash(\"C:/Users/joelr/AppData/Local/Programs/Python/Python311/python.exe\" -m venv venv)",
      "Bash(\"c:/Kod/intervju-transkribering-1/dist-backend/venv/Scripts/python.exe\" --version)",
      "Bash(\"c:/Kod/intervju-transkribering-1/dist-backend/venv/Scripts/pip.exe\" install torch torchaudio --index-url https://download.pytorch.org/whl/cu121)",
      "Bash(\"c:/Kod/intervju-transkribering-1/dist-backend/venv/Scripts/pip.exe\" install -r \"c:/Kod/intervju-transkribering-1/dist-backend/requirements.txt\")",
      "Bash(\"./venv/Scripts/python.exe\" -c \"import app.main; print\\(''Import successful''\\)\")",
      "Bash(\"./venv/Scripts/python.exe\" -m uvicorn:*)",
      "Bash(\"c:/Kod/intervju-transkribering-1/dist-backend/venv/Scripts/python.exe\":*)",
      "Bash(git reset:*)",
      "Bash(\"./venv/Scripts/python.exe\" -c \"from pyannote.audio import Pipeline; print\\(''pyannote OK''\\)\")",
      "Bash(\"./venv/Scripts/python.exe\":*)",
      "Bash(\"./venv/Scripts/python.exe\" -m uvicorn app.main:app --host 127.0.0.1 --port 8000)",
      "Bash(cmd.exe /c \"taskkill /F /PID 47120\")",
      "Bash(\"./venv/Scripts/python.exe\" -c:*)",
      "Bash(\"./venv/Scripts/python.exe\" -c \"\nfrom app.services.diarization import is_diarization_available, _get_hf_token\nprint\\(''Token:'', _get_hf_token\\(\\)[:15] if _get_hf_token\\(\\) else ''None''\\)\nprint\\(''Available:'', is_diarization_available\\(\\)\\)\n\")",
      "Bash(ls:*)",
      "Bash(\"./venv/Scripts/python.exe\" -c \"\nimport os\nimport logging\nlogging.basicConfig\\(level=logging.INFO\\)\n\nfrom app.services.diarization import add_speaker_labels, _get_hf_token\nfrom pathlib import Path\n\n# Set token in environment\ntoken = _get_hf_token\\(\\)\nif token:\n    os.environ[''HF_TOKEN''] = token\n    print\\(f''Token set: {token[:15]}...''\\)\n\nsegments = [\n    {''start'': 0.0, ''end'': 10.0, ''text'': ''Hej, det här är en test.''},\n    {''start'': 10.0, ''end'': 20.0, ''text'': ''Ja, det stämmer.''},\n]\naudio = Path\\(''uploads/0b9cd05c-67f4-41da-8b15-755170117d59.wav''\\)\n\nprint\\(''Starting diarization...''\\)\nresult = add_speaker_labels\\(segments, audio\\)\nfor s in result:\n    print\\(f''  Speaker: {s.get\\(\"\"speaker\"\", \"\"NONE\"\"\\)} - {s[\"\"text\"\"][:30]}''\\)\n\")",
      "Bash(\"./venv/Scripts/python.exe\" -c \"\nimport os\nos.environ[''HF_TOKEN''] = ''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''\n\nfrom whisperx.diarize import DiarizationPipeline\nprint\\(''Creating pipeline with token param...''\\)\ntry:\n    pipeline = DiarizationPipeline\\(token=os.environ[''HF_TOKEN''], device=''cpu''\\)\n    print\\(''Success with token!''\\)\nexcept TypeError as e:\n    print\\(f''Failed with token: {e}''\\)\n    print\\(''Trying use_auth_token...''\\)\n    pipeline = DiarizationPipeline\\(use_auth_token=os.environ[''HF_TOKEN''], device=''cpu''\\)\n    print\\(''Success with use_auth_token!''\\)\n\")",
      "Bash(\"./venv/Scripts/python.exe\" -c \"\nimport os\nos.environ[''HF_TOKEN''] = ''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''\n\n# Apply the patch\nfrom app.services.diarization import _patch_huggingface_hub\n_patch_huggingface_hub\\(\\)\n\nfrom whisperx.diarize import DiarizationPipeline\nprint\\(''Creating pipeline...''\\)\npipeline = DiarizationPipeline\\(use_auth_token=os.environ[''HF_TOKEN''], device=''cpu''\\)\nprint\\(''Success!''\\)\n\")",
      "Bash(\"./venv/Scripts/python.exe\" -c \"\nimport os\nos.environ[''HF_TOKEN''] = ''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''\nos.environ[''TORCH_FORCE_WEIGHTS_ONLY_LOAD''] = ''0''\n\n# Patch torch.load FIRST\nimport torch\nif not hasattr\\(torch, ''_patched_load''\\):\n    _orig_load = torch.load\n    def _patched_load\\(*args, **kwargs\\):\n        kwargs[''weights_only''] = False\n        return _orig_load\\(*args, **kwargs\\)\n    torch.load = _patched_load\n    torch._patched_load = True\n    print\\(''Patched torch.load''\\)\n\n# Apply the HF patch\nfrom app.services.diarization import _patch_huggingface_hub\n_patch_huggingface_hub\\(\\)\n\nfrom whisperx.diarize import DiarizationPipeline\nprint\\(''Creating pipeline...''\\)\npipeline = DiarizationPipeline\\(use_auth_token=os.environ[''HF_TOKEN''], device=''cpu''\\)\nprint\\(''Success!''\\)\n\")",
      "Bash(timeout 120 \"./venv/Scripts/python.exe\" -c \"\nimport os\nimport sys\nos.environ[''HF_TOKEN''] = ''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''\nos.environ[''TORCH_FORCE_WEIGHTS_ONLY_LOAD''] = ''0''\nprint\\(''Starting...'', flush=True\\)\n\n# Patch torch.load FIRST\nimport torch\nprint\\(f''PyTorch version: {torch.__version__}'', flush=True\\)\nif not hasattr\\(torch, ''_patched_load''\\):\n    _orig_load = torch.load\n    def _patched_load\\(*args, **kwargs\\):\n        kwargs[''weights_only''] = False\n        return _orig_load\\(*args, **kwargs\\)\n    torch.load = _patched_load\n    torch._patched_load = True\n    print\\(''Patched torch.load'', flush=True\\)\n\n# Apply HF patch\nimport huggingface_hub\nif not hasattr\\(huggingface_hub, ''_patched''\\):\n    _orig_dl = huggingface_hub.hf_hub_download\n    def _patched_dl\\(*args, **kwargs\\):\n        if ''use_auth_token'' in kwargs:\n            kwargs[''token''] = kwargs.pop\\(''use_auth_token''\\)\n        return _orig_dl\\(*args, **kwargs\\)\n    huggingface_hub.hf_hub_download = _patched_dl\n    huggingface_hub._patched = True\n    print\\(''Patched huggingface_hub'', flush=True\\)\n\nprint\\(''Importing whisperx...'', flush=True\\)\nfrom whisperx.diarize import DiarizationPipeline\nprint\\(''Creating pipeline...'', flush=True\\)\npipeline = DiarizationPipeline\\(use_auth_token=os.environ[''HF_TOKEN''], device=''cpu''\\)\nprint\\(''SUCCESS!'', flush=True\\)\n\")",
      "Bash(\"c:/Kod/intervju-transkribering-1/dist-backend/venv/Scripts/pip.exe\" install requests)",
      "Bash(timeout 180 \"./venv/Scripts/python.exe\" -c \"\nimport os\nimport sys\nos.environ[''HF_TOKEN''] = ''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''\n\nprint\\(''Patching torch.load...'', flush=True\\)\nimport torch\n_orig_load = torch.load\ndef _patched_load\\(*args, **kwargs\\):\n    kwargs[''weights_only''] = False\n    return _orig_load\\(*args, **kwargs\\)\ntorch.load = _patched_load\n\nprint\\(''Patching huggingface_hub...'', flush=True\\)\nimport huggingface_hub\n_orig_dl = huggingface_hub.hf_hub_download\ndef _patched_dl\\(*args, **kwargs\\):\n    if ''use_auth_token'' in kwargs:\n        kwargs[''token''] = kwargs.pop\\(''use_auth_token''\\)\n    return _orig_dl\\(*args, **kwargs\\)\nhuggingface_hub.hf_hub_download = _patched_dl\n\nprint\\(''Creating DiarizationPipeline...'', flush=True\\)\nfrom whisperx.diarize import DiarizationPipeline\npipeline = DiarizationPipeline\\(use_auth_token=os.environ[''HF_TOKEN''], device=''cpu''\\)\nprint\\(''SUCCESS!'', flush=True\\)\n\")",
      "Bash(cmd.exe /c \"Starta-TystText.bat\")",
      "Bash(cmd.exe:*)",
      "Bash(gh repo edit:*)"
    ]
  }
}
